# SSE_Group20: GoGo Delivery
For the course SSE to build a security app for Covid Tracking System.
# How to run?

### Tech Stack

| Layer | Technology |
|--------|-------------|
| **Backend Framework** | [Express.js](https://expressjs.com/) |
| **Database** | MySQL 8.4 |
| **NPM DB connect** | mysql2 |
| **Frontend** | HTML + CSS + JS (Vue?) |
| **Environment** | Node.js |
| **OS** | Windows / macOS(Is that work?)  |

## 1. Prepare environment
#### 1.1 Install Node.js & npm
Download [Node.js LTS](https://nodejs.org/en/download/), Check npm status:
```
node -v
npm -v
```

#### 1.2 Install MySQL
1. Install MySQL Community Server
2. Set root Password
3. Launch MySql server.

## 2.Setup environment
### 2.1 Setup environment
Use command:
```
make setup
```
### 2.2 Initialize all databases
Use Command:
```
make init
```

### 2.3 Initialize database data / Reset data (Really useful)
Use command:
```
make db
```

## 3.Database Configuration
You might need to change a few configurations in `database/db.js` to connect DB to pool.
```
js

const pool = mysql.createPool({
  host: '127.0.0.1',                    # You dont need to change it I think...
  user: 'xxxxxxxx',                     # Your Mysql username, should be the same.
  password: 'xxxxxxxx',                 # Your password
  database: 'covid_service',            # The same name as you decided in Step 2.
});

```
Also, Session DB config need to change as well, in `routes/session.js`:

```
module.exports = function createSessionMiddleware() {
  const store = new MySQLStore({
    host: '127.0.0.1',
    user: 'root',                            # Your Mysql username, should be the same.
    password: 'xxxxxxxx',                      # Your password
    database: 'gogo',
    clearExpired: true,
    checkExpirationInterval: 15 * 60 * 1000, # set expiration time,
    expiration: 24 * 60 * 60 * 1000          # DB overtime
  });
```


## Version 0.1 Summary
This Version initializes the full-stack web application for **COVID Service** --  **GOGO delivery** web app Version **0.1**, built using:
- **Node.js + Express**
- **MySQL / Node.js mysql2 database**
- **Vue 2.6 frontend**
- **Nodemailer** for email verification
- **Session-based auth** (no JWT): login, session check, logout, and a protected provider API; front-end XHR examples
- **RESTful routes** for login, password reset, and email handling.

## Whatâ€™s included
- **Frontend & Backend**
  - `index.html`, `login.html`, `signup.html`, `provider_login.html`, `User_mainpage.html` with Vue 2.6 entry `app.js`.
  - `User_mainpage` Components:
    - Header: site title **GOGO delivery**
    - Sidebar: user greeting + menu items href to (Home/ Profile / Account Setting/ Covid_status/ History/ Signout).
    - Provider list: cards generated by v-for from AJAX `/User_main/getProvider.ajax`.
  - **Important Features**:
    - **History computed**: `groupedOrders` (group by `service_id`).
    - **Email Verification**: Signup triggers email verification via Nodemailer; users must verify before login.
      - **Do not Try Email funcions too offen. This is My(Shuhao) Goodle SMTP Account. Other wish I would be BANNED.**
    - **Password Reset**: Forgot password flow with email link and reset form.
    - **Session Management**: Secure session handling with Express-session; session checks for protected routes.
    - **Profile and Account Settings**: Editable user profile and account settings.
    - **Provider API**: Authenticated provider login and protected API endpoints.
    - **Database Integration**: MySQL schema for users, providers, orders; sample seed data included.
    - **Security**: Input validation, password hashing, and basic error handling.
    - **Documentation**: Makefile, Setup instructions, environment config, and API usage examples in README.
  - **Ongoing Features**:
    - **Provider-side Order Management**: Providers can view and update order status.
    - **Covid Status Tracking**: Backend Algorithm for change covid status based on the contacts for both user and providers.
    - **Unit and Integration Tests**: Initial test coverage for core features.

## How to Run the App
1. Make sure you have **MySQL** Version > 8.0 and **npm** installed on your system.
2. Follow the steps in the provided `Makefile` to set up, build, and run the project.
3. `make setup` for build npm dependencies, `make init` for initialize main databases and session databases.
4. `make db` for build and reset main database

## Problem Shooting
Few things might need change on local device

**Q: I cant connect to the database when I run the app?**  
A: Edit the SQL configs file located at `database/db.js` and `routes/session.js`, change username and password to match your Mysql Setting. **Do Not** Change database name.

**Q: How do I reset the database?**  
A: Use `make db` to drop and recreate the database with seed data.

**Q: Email verification not working?**  
A: Check SMTP settings in `routes/mailtest.js` and ensure your email provider allows SMTP access.
A: Another possible reason is I close the auth for google SMTP. In this case, replace the SMTP settings in `routes/mailtest.js` to your own SMTP service.

**Q: How do I find session info?**  
A: After logging into MySQL, use `USE gogo;` to select the database, then query the session information table (such as `sessions`):
```sql
SELECT * FROM sessions;
```




    
